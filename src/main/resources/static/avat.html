<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
 <form id="change" >
     <input type="file" value="上传头像" name="uploadfile">
     <div>
         <img src="" id="img" class="c">
     </div>
     <div>
         <input type="button" id="changeavater" value="上传" >
     </div>
 </form>

</body>
<style>

    .c{
        width: 200px;
        height: 200px;
        background-color:red;
    }
</style>
<script src="./jquery-1.11.3.js"></script>
<script type="text/javascript">

    $("#changeavater").click(function () {
        var data = new FormData($("#change")[0])
        $.ajax({
            "url":"/library/image",
            "data":data,
            "dataType":'json',
            "type":'post',
            cache: false,
            "processData": false,
            "contentType": false,
            "success":function (res) {
                console.log(res.result)
                $("#img").attr("src","/library/"+res.result);

               // location.href="http://localhost:8083/library"+res.result;

            },
            "error": function () {
                alert("上传失败");
            }

        });
    });



</script>
</html>